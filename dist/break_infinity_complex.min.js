!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("break_infinity.js")):"function"==typeof define&&define.amd?define(["break_infinity.js"],e):(t=t||self).Complex=e(t.Decimal)}(this,function(t){"use strict";var e;let i=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;function n(t,e){return new u(t,e)}function r(t){return t instanceof u?t:n(t,0)}function o(t){return t instanceof i?t:new i(t)}class u{constructor(t,e){if(void 0===e){if(t instanceof u){this.fromComplex(t);return}if("string"==typeof t){this.fromString(t);return}}this.re=o(t??0),this.im=o(e??0)}}return u.fromString=function(t){return new u().fromString(t)},u.fromComplex=function(t){return new u().fromComplex(t)},u.fromModuleArgument=function(t,e){return new u().fromModuleArgument(t,e)},u.add=function(t,e){return r(t).add(r(e))},u.plus=function(t,e){return r(t).add(r(e))},u.addReal=function(t,e){return r(t).addReal(e)},u.plusReal=function(t,e){return r(t).addReal(e)},u.minus=function(t,e){return r(t).minus(r(e))},u.sub=function(t,e){return r(t).minus(r(e))},u.subtract=function(t,e){return r(t).minus(r(e))},u.minusReal=function(t,e){return r(t).minusReal(e)},u.subReal=function(t,e){return r(t).minusReal(e)},u.subtractReal=function(t,e){return r(t).minusReal(e)},u.times=function(t,e){return r(t).times(r(e))},u.mul=function(t,e){return r(t).times(r(e))},u.multply=function(t,e){return r(t).times(r(e))},u.timesReal=function(t,e){return r(t).timesReal(e)},u.mulReal=function(t,e){return r(t).timesReal(e)},u.multiplyReal=function(t,e){return r(t).timesReal(e)},u.div=function(t,e){return r(t).div(r(e))},u.divideBy=function(t,e){return r(t).div(r(e))},u.dividedBy=function(t,e){return r(t).div(r(e))},u.divReal=function(t,e){return r(t).divReal(e)},u.divideByReal=function(t,e){return r(t).divReal(e)},u.dividedByReal=function(t,e){return r(t).divReal(e)},u.pow=function(t,e){return r(t).pow(r(e))},u.powReal=function(t,e){return r(t).powReal(e)},u.log=function(t,e){return r(comp).log(r(e))},u.logReal=function(t,e){return r(comp).logReal(e)},u.ln=function(t){return r(t).ln()},u.log10=function(t){return r(t).log10()},u.log2=function(t){return r(t).log2()},u.exp=function(t){return r(t).exp()},u.sin=function(t){return r(t).sin()},u.arcsin=function(t){return r(t).arcsin()},u.asin=function(t){return r(t).arcsin()},u.eq=function(t,e){return r(t).eq(r(e))},u.neq=function(t,e){return r(t).neq(r(e))},u.gt=function(t,e){return r(t).gt(r(e))},u.lt=function(t,e){return r(t).lt(r(e))},u.gte=function(t,e){return r(t).gte(r(e))},u.lte=function(t,e){return r(t).lte(r(e))},u.eqz=function(t){return r(t).eqz()},u.nez=function(t){return r(t).nez()},u.prototype.fromString=function(t){if("NaN"===t)return this.fromComplex(u.NaN);if("i"===t)return this.fromComplex(u.unit);if("-i"===t)return this.fromComplex(u.unit).neg();let e=t.match(/^(.+)\s*(\+|-)\s*(.+)?i$/);if(e){let n=i.fromString(e[1]),r=e[3]?i.fromString(e[3]):new i(1);this.re=n,this.im="+"===e[2]?r:r.neg()}else{let o=t.match(/^(.+)(i?)$/);if(this.fromComplex(u.zero),null!==o){let s=i.fromString(o[1]);o[2]?this.im=s:this.re=s}}if(this.isNaN())throw Error("[ComplexError] Invalid argument: "+t);return this},u.prototype.fromComplex=function(t){return this.re=t.re,this.im=t.im,this},Object.defineProperty(u.prototype,"module",{get:function t(){return this.re.pow(2).add(this.im.pow(2)).sqrt()}}),Object.defineProperty(u.prototype,"arg",{get:function t(){return this.eq(0)?NaN:this.re.gt(0)?Math.atan(this.im.div(this.re).toNumber()):this.re.eq(0)?this.im.gt(0)?Math.PI/2:-Math.PI/2:this.re.lt(0)?this.im.gte(0)?Math.atan(this.im.div(this.re).toNumber())+Math.PI:Math.atan(this.im.div(this.re).toNumber())-Math.PI:void 0}}),u.prototype.fromModuleArgument=function(t,e){let i=o(t);return this.re=i.times(Math.cos(e)),this.im=i.times(Math.sin(e)),this},Object.defineProperty(u.prototype,"isReal",{get:function t(){return this.im.eq(0)}}),u.prototype.add=function(t){return n(this.re.add(t.re),this.im.add(t.im))},u.prototype.plus=function(t){return this.add(t)},u.prototype.addReal=function(t){return n(this.re.add(t),this.im)},u.prototype.plusReal=function(t){return this.addReal(t)},u.prototype.neg=function(){return n(this.re.neg(),this.im.neg())},u.prototype.conjugate=function(){return n(this.re,this.im.neg())},u.prototype.minus=function(t){return this.add(t.neg())},u.prototype.sub=function(t){return this.minus(t)},u.prototype.subtract=function(t){return this.minus(t)},u.prototype.minusReal=function(t){return this.addReal(o(t).neg())},u.prototype.subReal=function(t){return this.minusReal(t)},u.prototype.subtractReal=function(t){return this.minusReal(t)},u.prototype.times=function(t){return this.isReal?t.timesReal(this.re):t.isReal?this.timesReal(t.re):n(this.re.times(t.re).minus(this.im.times(t.im)),this.re.times(t.im).add(this.im.times(t.re)))},u.prototype.mul=function(t){return this.times(t)},u.prototype.multply=function(t){return this.times(t)},u.prototype.timesReal=function(t){return n(this.re.times(t),this.im.times(t))},u.prototype.mulReal=function(t){return this.timesReal(t)},u.prototype.multplyReal=function(t){return this.timesReal(t)},u.prototype.timesI=function(){return n(this.im.neg(),this.re)},u.prototype.mulI=function(t){return this.timesI(t)},u.prototype.multplyI=function(t){return this.timesI(t)},u.prototype.eqz=function(){return this.re.eq(0)&&this.im.eq(0)},u.prototype.nez=function(){return!this.eqz()},u.prototype.gt=function(t){if(this.isReal&&t.isReal)return this.re.gt(t.re);throw Error("[ComplexError]Complex cannot be compared.")},u.prototype.lt=function(t){if(this.isReal&&t.isReal)return this.re.gt(t.re);throw Error("[ComplexError]Complex cannot be compared.")},u.prototype.gte=function(t){return!this.lt(t)},u.prototype.lte=function(t){return!this.gt(t)},u.prototype.neq=function(t){return!this.eq(t)},u.prototype.eq=function(t){let e=r(t);return this.re.eq(e.re)&&this.im.eq(e.im)},u.prototype.div=function(t){return t.eqz()?u.fromComplex(u.Infinity):t.isReal?n(this.re.div(t.re),this.im.div(t.im)):this.times(t.recip())},u.prototype.divideBy=function(t){return this.div(t)},u.prototype.dividedBy=function(t){return this.div(t)},u.prototype.divReal=function(t){return n(this.re.div(t),this.im.div(t))},u.prototype.divideByReal=function(t){return this.divReal(t)},u.prototype.dividedByReal=function(t){return this.divReal(t)},u.prototype.divI=function(){return this.timesI().neg()},u.prototype.divideByI=function(){return this.divI()},u.prototype.dividedByI=function(){return this.divI()},u.prototype.recip=function(){return this.eqz()?u.fromComplex(u.Infinity):this.im.eq(0)?n(this.re.recip(),0):this.conjugate().timesReal(this.re.pow(2).add(this.im.pow(2)).recip())},u.prototype.sin=function(){return this.timesI().exp().minus(this.neg().timesI().exp()).divReal(2).divI()},u.prototype.cos=function(){return this.timesI().exp().add(this.neg().timesI().exp()).divReal(2)},u.prototype.tan=function(){return this.timesI().exp().minus(this.neg().timesI().exp()).div(this.timesI().exp().add(this.neg().timesI().exp())).divI()},u.prototype.cot=function(){return this.ran().recip()},u.prototype.arcsin=function(){return this.sqr().minusReal(1).sqrt().minus(this).timesI().ln().timesI()},u.prototype.asin=function(){return this.arcsin()},u.prototype.arccos=function(){return this.sqr().minusReal(1).sqrt().add(this).ln().timesI().neg()},u.prototype.acos=function(){return this.arccos()},u.prototype.arctan=function(){return this.timesI().addReal(1).div(this.timesI().minusReal(1).neg()).ln().divI().divReal(2)},u.prototype.atan=function(){return this.arctan()},u.prototype.ln=function(){return n(this.module.ln(),this.arg)},u.prototype.log10=function(){return this.ln().timesReal(Math.LOG10E)},u.prototype.log2=function(){return this.ln().timesReal(Math.LOG2E)},u.prototype.log=function(t){return this.ln().div(t.ln())},u.prototype.logReal=function(t){return this.ln().div(o(t).ln())},u.prototype.powI=function(){return n(Math.cos(this.module.ln()),Math.sin(this.module.ln())).timesReal(o(this.arg).neg().exp())},u.prototype.pow=function(t){return t.eqz()?r(1):this.eqz()?r(0):t.eq(1)?this:this.eq(1)?r(1):t.isReal?this.powReal(t.re):t.re.eq(0)?this.powI().powReal(t.im):this.powReal(t.re).times(this.powI().powReal(t.im))},u.prototype.powReal=function(t){var e,i;return this.eqz()?u.zero:(e=this.module.pow(t),i=this.arg*t,u.fromModuleArgument(e,i))},u.prototype.sqr=function(){return this.powReal(2)},u.prototype.sqrt=function(){return this.powReal(.5)},u.prototype.cbrt=function(){return this.powReal(1/3)},u.prototype.isNaN=function(){return isNaN(this.re.mantissa)||isNaN(this.re.exponent)||isNaN(this.im.mantissa)||isNaN(this.im.exponent)},u.prototype.exp=function(){return r(Math.E).pow(this)},u.prototype.toString=function(){if(this.im.eq(0))return this.re.toString();if(this.re.eq(0))return`${this.im.eq(1)?"":this.im.toString()}i`;let t=this.im.gte(0)?"+":"-";return`${this.re}${t}${this.im.abs()}i`},u.prototype.valueOf=function(){throw Error("Implicit conversion from Complex to number")},u.prototype.toJSON=function(){return this.toString()},u.zero=r(0),u.unit=new u(0,1),u.NaN=n(NaN,NaN),u.Infinity=n(1/0,1/0),u});